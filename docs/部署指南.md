# è¡£æ­åŠ©æ‰‹ - éƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å®Œæˆè¡£æ­åŠ©æ‰‹å°ç¨‹åºçš„å®Œæ•´éƒ¨ç½²æµç¨‹ï¼ŒåŒ…æ‹¬ç¯å¢ƒé…ç½®ã€äº‘å¼€å‘è®¾ç½®ã€æ•°æ®åº“åˆå§‹åŒ–ç­‰æ­¥éª¤ã€‚

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. è´¦å·è¦æ±‚

- **å¾®ä¿¡å°ç¨‹åºè´¦å·**: éœ€è¦å·²å®Œæˆä¼ä¸šè®¤è¯æˆ–ä¸ªäººè®¤è¯
- **äº‘å¼€å‘æƒé™**: éœ€è¦å¼€é€šäº‘å¼€å‘åŠŸèƒ½
- **å¼€å‘æƒé™**: éœ€è¦å°ç¨‹åºå¼€å‘è€…æƒé™

### 2. å·¥å…·å‡†å¤‡

- **å¾®ä¿¡å¼€å‘è€…å·¥å…·**: v1.06.2301160 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: v16.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Git**: ç”¨äºä»£ç ç®¡ç†ï¼ˆæ¨èï¼‰

### 3. ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+
- **å†…å­˜**: 8GB RAM æˆ–æ›´é«˜
- **å­˜å‚¨**: è‡³å°‘ 2GB å¯ç”¨ç©ºé—´

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè·å–æºä»£ç 

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-repo/clothing-match-app.git
cd clothing-match-app

# æˆ–è€…ä¸‹è½½ZIPæ–‡ä»¶å¹¶è§£å‹
```

### ç¬¬äºŒæ­¥ï¼šé…ç½®å°ç¨‹åº

1. **æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·**
   - ç‚¹å‡»"å¯¼å…¥é¡¹ç›®"
   - é€‰æ‹©é¡¹ç›®ç›®å½•
   - å¡«å…¥AppIDï¼ˆæµ‹è¯•é˜¶æ®µå¯ä½¿ç”¨æµ‹è¯•å·ï¼‰
   - é¡¹ç›®åç§°ï¼šè¡£æ­åŠ©æ‰‹

2. **é…ç½®AppID**
   ```json
   // project.config.json
   {
     "appid": "your-appid-here"
   }
   ```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®äº‘å¼€å‘

1. **å¼€é€šäº‘å¼€å‘**
   - åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»"äº‘å¼€å‘"æŒ‰é’®
   - é€‰æ‹©"å¼€é€šäº‘å¼€å‘"
   - åŒæ„æœåŠ¡æ¡æ¬¾

2. **åˆ›å»ºäº‘ç¯å¢ƒ**
   - ç¯å¢ƒåç§°ï¼šclothing-match
   - ç¯å¢ƒç±»å‹ï¼šæ­£å¼ç¯å¢ƒï¼ˆç”Ÿäº§ç¯å¢ƒé€‰æ‹©æŒ‰é‡ä»˜è´¹ï¼‰
   - åœ°åŸŸï¼šé€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„åœ°åŸŸ
   - ç¯å¢ƒIDï¼šè®°å½•æ­¤IDï¼Œåç»­é…ç½®éœ€è¦

3. **é…ç½®äº‘ç¯å¢ƒ**
   ```javascript
   // app.js
   wx.cloud.init({
     env: 'cloud1-xxxxx', // æ›¿æ¢ä¸ºä½ çš„ç¯å¢ƒID
     traceUser: true,
   })
   ```

### ç¬¬å››æ­¥ï¼šéƒ¨ç½²äº‘å‡½æ•°

1. **å®‰è£…ä¾èµ–**
   ```bash
   # åœ¨é¡¹ç›®æ ¹ç›®å½•
   npm install
   ```

2. **éƒ¨ç½²äº‘å‡½æ•°**
   
   **æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·**
   - å³é”®ç‚¹å‡» `cloudfunctions` æ–‡ä»¶å¤¹
   - é€‰æ‹©"ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–"
   - ç­‰å¾…éƒ¨ç½²å®Œæˆ

   **æ–¹æ³•äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œ**
   ```bash
   # éƒ¨ç½²å•ä¸ªäº‘å‡½æ•°
   wx server deploy --function removeBackground
   wx server deploy --function recommend
   
   # éƒ¨ç½²æ‰€æœ‰äº‘å‡½æ•°
   wx server deploy --all
   ```

3. **æµ‹è¯•äº‘å‡½æ•°**
   ```javascript
   // åœ¨å°ç¨‹åºæ§åˆ¶å°æµ‹è¯•
   wx.cloud.callFunction({
     name: 'removeBackground',
     data: { imageUrl: 'test-image' }
   }).then(res => {
     console.log(res.result)
   })
   ```

### ç¬¬äº”æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

1. **åˆ›å»ºæ•°æ®åº“é›†åˆ**
   
   åœ¨äº‘å¼€å‘æ§åˆ¶å°ä¸­åˆ›å»ºä»¥ä¸‹é›†åˆï¼š

   ```javascript
   // clothing é›†åˆ
   {
     "_id": "è‡ªåŠ¨ç”Ÿæˆ",
     "_openid": "ç”¨æˆ·openid",
     "name": "è¡£ç‰©åç§°",
     "image": "å›¾ç‰‡äº‘å­˜å‚¨è·¯å¾„",
     "category": "åˆ†ç±»",
     "tags": ["æ ‡ç­¾æ•°ç»„"],
     "color": "é¢œè‰²",
     "season": "å­£èŠ‚",
     "createTime": "åˆ›å»ºæ—¶é—´",
     "updateTime": "æ›´æ–°æ—¶é—´"
   }
   
   // outfits é›†åˆ
   {
     "_id": "è‡ªåŠ¨ç”Ÿæˆ",
     "_openid": "ç”¨æˆ·openid",
     "name": "æ­é…åç§°",
     "description": "æè¿°",
     "thumbnail": "ç¼©ç•¥å›¾",
     "items": ["è¡£ç‰©IDæ•°ç»„"],
     "tags": ["åœºæ™¯æ ‡ç­¾"],
     "season": "é€‚ç”¨å­£èŠ‚",
     "createTime": "åˆ›å»ºæ—¶é—´",
     "updateTime": "æ›´æ–°æ—¶é—´"
   }
   
   // tags é›†åˆ
   {
     "_id": "è‡ªåŠ¨ç”Ÿæˆ",
     "_openid": "ç”¨æˆ·openid",
     "name": "æ ‡ç­¾åç§°",
     "type": "æ ‡ç­¾ç±»å‹",
     "count": "ä½¿ç”¨æ¬¡æ•°",
     "createTime": "åˆ›å»ºæ—¶é—´"
   }
   ```

2. **è®¾ç½®æ•°æ®åº“æƒé™**
   ```json
   {
     "read": "auth.uid == resource._openid",
     "write": "auth.uid == resource._openid"
   }
   ```

3. **åˆ›å»ºç´¢å¼•**ï¼ˆæé«˜æŸ¥è¯¢æ€§èƒ½ï¼‰
   ```javascript
   // clothing é›†åˆç´¢å¼•
   { "_openid": 1, "createTime": -1 }
   { "_openid": 1, "category": 1 }
   
   // outfits é›†åˆç´¢å¼•
   { "_openid": 1, "createTime": -1 }
   { "_openid": 1, "season": 1 }
   
   // tags é›†åˆç´¢å¼•
   { "_openid": 1, "count": -1 }
   ```

### ç¬¬å…­æ­¥ï¼šé…ç½®äº‘å­˜å‚¨

1. **åˆ›å»ºå­˜å‚¨ç›®å½•**
   ```
   clothing/          # è¡£ç‰©å›¾ç‰‡
   outfits/           # æ­é…å›¾ç‰‡
   avatars/           # ç”¨æˆ·å¤´åƒ
   temp/              # ä¸´æ—¶æ–‡ä»¶
   ```

2. **è®¾ç½®å­˜å‚¨æƒé™**
   ```json
   {
     "read": "auth != null",
     "write": "auth.uid == resource._openid"
   }
   ```

### ç¬¬ä¸ƒæ­¥ï¼šé…ç½®AIæŠ å›¾API

1. **é€‰æ‹©æŠ å›¾æœåŠ¡**
   
   **é€‰é¡¹ä¸€ï¼šä½¿ç”¨å…è´¹API**
   - æ³¨å†ŒæŠ å›¾å–µAPIè´¦å·
   - è·å–APIå¯†é’¥
   - åœ¨äº‘å‡½æ•°ä¸­é…ç½®

   **é€‰é¡¹äºŒï¼šè‡ªå»ºæœåŠ¡**
   - éƒ¨ç½²UÂ²-Netæ¨¡å‹åˆ°äº‘æœåŠ¡å™¨
   - åˆ›å»ºHTTP APIæ¥å£
   - åœ¨äº‘å‡½æ•°ä¸­è°ƒç”¨

2. **é…ç½®äº‘å‡½æ•°**
   ```javascript
   // cloudfunctions/removeBackground/index.js
   const API_KEY = 'your-api-key'
   const API_URL = 'https://api.example.com/remove-background'
   ```

### ç¬¬å…«æ­¥ï¼šæµ‹è¯•éƒ¨ç½²

1. **æœ¬åœ°æµ‹è¯•**
   - ç‚¹å‡»ç¼–è¯‘æŒ‰é’®
   - åœ¨æ¨¡æ‹Ÿå™¨ä¸­æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
   - æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

2. **çœŸæœºæµ‹è¯•**
   - ç‚¹å‡»"é¢„è§ˆ"
   - ä½¿ç”¨æ‰‹æœºæ‰«æäºŒç»´ç 
   - æµ‹è¯•æ‹ç…§ã€ä¸Šä¼ ã€ä¿å­˜ç­‰åŠŸèƒ½

3. **åŠŸèƒ½æ¸…å•æµ‹è¯•**
   - âœ… å›¾ç‰‡ä¸Šä¼ å’ŒAIæŠ å›¾
   - âœ… è¡£ç‰©ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
   - âœ… æ‹–æ‹½æ­é…åŠŸèƒ½
   - âœ… æ™ºèƒ½æ¨è
   - âœ… æ ‡ç­¾ç®¡ç†
   - âœ… å­£èŠ‚ä¸»é¢˜åˆ‡æ¢

## ğŸ”§ é«˜çº§é…ç½®

### 1. æ€§èƒ½ä¼˜åŒ–

**å›¾ç‰‡å‹ç¼©é…ç½®**
```javascript
// åœ¨ä¸Šä¼ å‰å‹ç¼©å›¾ç‰‡
wx.compressImage({
  src: tempFilePath,
  quality: 80,
  success: (res) => {
    // ä¸Šä¼ å‹ç¼©åçš„å›¾ç‰‡
  }
})
```

**ç¼“å­˜ç­–ç•¥**
```javascript
// è®¾ç½®æœ¬åœ°ç¼“å­˜
wx.setStorageSync('userPreference', data)

// è®¾ç½®ç¼“å­˜æ—¶é—´
const cacheTime = 24 * 60 * 60 * 1000 // 24å°æ—¶
```

### 2. å®‰å…¨é…ç½®

**æ•°æ®æ ¡éªŒ**
```javascript
// åœ¨äº‘å‡½æ•°ä¸­æ ¡éªŒè¾“å…¥æ•°æ®
if (!event.imageUrl || typeof event.imageUrl !== 'string') {
  return { success: false, error: 'å‚æ•°é”™è¯¯' }
}
```

**è®¿é—®æ§åˆ¶**
```javascript
// éªŒè¯ç”¨æˆ·æƒé™
const { OPENID } = cloud.getWXContext()
if (!OPENID) {
  return { success: false, error: 'ç”¨æˆ·æœªç™»å½•' }
}
```

### 3. ç›‘æ§é…ç½®

**é”™è¯¯ç›‘æ§**
```javascript
// åœ¨äº‘å‡½æ•°ä¸­æ·»åŠ é”™è¯¯æ•è·
try {
  // ä¸šåŠ¡é€»è¾‘
} catch (error) {
  console.error('äº‘å‡½æ•°æ‰§è¡Œé”™è¯¯:', error)
  return { success: false, error: error.message }
}
```

**æ€§èƒ½ç›‘æ§**
```javascript
// è®°å½•æ‰§è¡Œæ—¶é—´
const startTime = Date.now()
// æ‰§è¡Œä¸šåŠ¡é€»è¾‘
const duration = Date.now() - startTime
console.log(`äº‘å‡½æ•°æ‰§è¡Œè€—æ—¶: ${duration}ms`)
```

## ğŸ“Š æˆæœ¬æ§åˆ¶

### 1. å…è´¹é¢åº¦ç®¡ç†

- **äº‘å‡½æ•°**: æ¯æœˆå…è´¹100ä¸‡æ¬¡è°ƒç”¨
- **äº‘å­˜å‚¨**: æ¯æœˆå…è´¹5GBå­˜å‚¨
- **äº‘æ•°æ®åº“**: æ¯æœˆå…è´¹2GBå­˜å‚¨ + æ¯å¤©5ä¸‡æ¬¡è¯»æ“ä½œ

### 2. ä¼˜åŒ–å»ºè®®

**å›¾ç‰‡ä¼˜åŒ–**
- å‹ç¼©å›¾ç‰‡å°ºå¯¸
- ä½¿ç”¨WebPæ ¼å¼
- è®¾ç½®CDNç¼“å­˜

**æ•°æ®åº“ä¼˜åŒ–**
- åˆç†è®¾ç½®ç´¢å¼•
- åˆ†é¡µæŸ¥è¯¢
- å®šæœŸæ¸…ç†æ— ç”¨æ•°æ®

**äº‘å‡½æ•°ä¼˜åŒ–**
- å‡å°‘å†·å¯åŠ¨
- åˆå¹¶æ‰¹é‡æ“ä½œ
- ä½¿ç”¨è¿æ¥æ± 

## ğŸ”„ æŒç»­éƒ¨ç½²

### 1. è‡ªåŠ¨åŒ–éƒ¨ç½²

**ä½¿ç”¨GitHub Actions**
```yaml
name: Deploy to WeChat Cloud
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '16'
      - name: Deploy Cloud Functions
        run: |
          npm install
          wx server deploy --all
```

### 2. ç‰ˆæœ¬ç®¡ç†

**ç‰ˆæœ¬å·è§„åˆ™**
- ä¸»ç‰ˆæœ¬å·ï¼šä¸å…¼å®¹çš„APIä¿®æ”¹
- æ¬¡ç‰ˆæœ¬å·ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- ä¿®è®¢å·ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

**å‘å¸ƒæµç¨‹**
1. æ›´æ–°ç‰ˆæœ¬å·
2. æ›´æ–°CHANGELOG
3. åˆ›å»ºå‘å¸ƒæ ‡ç­¾
4. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **äº‘å‡½æ•°è°ƒç”¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥äº‘å‡½æ•°çŠ¶æ€
   wx cloud functions:list
   
   # æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—
   wx cloud logs removeBackground
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç¯å¢ƒIDé…ç½®
   # ç¡®è®¤æ•°æ®åº“æƒé™è®¾ç½®
   # éªŒè¯ç´¢å¼•åˆ›å»ºçŠ¶æ€
   ```

3. **å›¾ç‰‡ä¸Šä¼ å¤±è´¥**
   ```bash
   # æ£€æŸ¥äº‘å­˜å‚¨æƒé™
   # ç¡®è®¤æ–‡ä»¶ååˆæ³•æ€§
   # éªŒè¯å­˜å‚¨ç©ºé—´ä½™é‡
   ```

### è°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨console.logè¾“å‡ºè°ƒè¯•ä¿¡æ¯**
2. **å¯ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„è°ƒè¯•æ¨¡å¼**
3. **æŸ¥çœ‹äº‘å‡½æ•°æ‰§è¡Œæ—¥å¿—**
4. **ä½¿ç”¨ç½‘ç»œé¢æ¿ç›‘æ§APIè°ƒç”¨**

## ğŸ“ æŠ€æœ¯æ”¯æŒ

**å¼€å‘å›¢é˜Ÿ**
- é‚®ç®±ï¼šdev@example.com
- æ–‡æ¡£ï¼šhttps://docs.example.com
- GitHubï¼šhttps://github.com/your-repo/clothing-match-app

**äº‘å¼€å‘æ”¯æŒ**
- å¾®ä¿¡äº‘å¼€å‘æ–‡æ¡£ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html
- äº‘å¼€å‘æ§åˆ¶å°ï¼šhttps://console.cloud.tencent.com/tcb

---

éƒ¨ç½²å®Œæˆåï¼Œæ­å–œæ‚¨æˆåŠŸä¸Šçº¿è¡£æ­åŠ©æ‰‹å°ç¨‹åºï¼å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚ğŸ‰